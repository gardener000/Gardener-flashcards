// data/cn_network_layer.js
export default {
  name: "计算机网络：网络层（中）—— IPv4",
  data: [
    {front:"网络层的两大核心功能是什么？  forwarding vs routing",back:`<dl><dt>转发 (Forwarding)</dt><dd>微观层面，在<mark>单个路由器</mark>内完成。<br>根据转发表 (Forwarding Table) 将数据包从输入端口快速送到正确的输出端口。</dd><dt>路由 (Routing)</dt><dd>宏观层面，涉及<mark>整个网络</mark>。<br>通过路由算法 (Routing Protocols) 确定数据包从源到目标的最佳路径，并生成转发表。</dd><dt>关系</dt><dd><mark>路由</mark>是决策者，<mark>转发</mark>是执行者。</dd></dl>`},
    {front:"网络层提供的两种服务模型 🌐",back:`<dl><dt>无连接服务 (Connectionless)</dt><dd>也称<mark>数据报网络 (Datagram Network)</mark>。<br>每个包独立选路，无需建立连接。<br><b>优点:</b> 灵活、高效、容错性好 (路由器故障可绕行)。<br><b>缺点:</b> 不保证按序、不保证送达。<br><b>代表:</b> <mark>Internet</mark>。</dd><dt>面向连接服务 (Connection-Oriented)</dt><dd>也称<mark>虚电路网络 (Virtual Circuit)</mark>。<br>通信前先建立一条路径 (VC)，所有包沿此路径传输。<br><b>优点:</b> 服务质量 (QoS) 有保障。<br><b>缺点:</b> 开销大，路径故障则连接中断。</dd></dl>`},
    {front:"路由算法的两大流派：LS vs DV 🗺️",back:`<dl><dt>链路状态 (Link-State, LS)</dt><dd><b>视野:</b> 全局。<br>每个路由器掌握<mark>整个网络</mark>的拓扑图。<br><b>算法:</b> <mark>Dijkstra</mark> 算法。<br><b>特点:</b> 信息量大，收敛快，不易产生环路。<br><b>代表:</b> <mark>OSPF</mark> 协议。</dd><dt>距离向量 (Distance-Vector, DV)</dt><dd><b>视野:</b> 局部。<br>每个路由器只了解<mark>与其直连邻居</mark>的信息。<br><b>算法:</b> <mark>Bellman-Ford</mark> 方程。<br><b>特点:</b> “好消息传得快，坏消息传得慢”，可能出现<mark>无穷计数</mark>问题。<br><b>代表:</b> <mark>RIP</mark>, <mark>BGP</mark>。</dd></dl>`},
    {front:"链路状态 (LS) 算法如何工作？ 🛰️",back:`<dl><dt>核心思想</dt><dd>每个路由器都成为网络地图的绘制者。</dd><dt>工作步骤</dt><dd>1. <b>信息共享:</b> 每个节点通过<mark>广播</mark>“链路状态包 (LSP)”告诉全网“我是谁，我的邻居是谁，到邻居的成本是多少”。<br>2. <b>构建地图:</b> 每个节点根据收到的所有LSP，在本地构建出<mark>完全相同</mark>的网络拓扑图。<br>3. <b>计算路径:</b> 在本地地图上，以自己为源点运行 <mark>Dijkstra</mark> 算法，计算到所有其他节点的最短路径。<br>4. <b>生成转发表:</b> 根据计算出的最短路径，确定去往每个目的地的“下一跳”。</dd></dl>`},
    {front:"距离向量 (DV) 算法的致命缺陷 ♾️",back:`<dl><dt>问题</dt><dd><mark>无穷计数 (Count-to-Infinity)</mark>。</dd><dt>原因</dt><dd>“好消息传得快，坏消息传得慢”。当网络中某条链路<mark>断开</mark> (坏消息) 时，路由器之间可能形成路由环路，并不断传递错误的“可达”信息。</dd><dt>举例</dt><dd>A-B-C。当A-B断开后，B可能从C那里听到“我能到A (路径是C-B-A)”，B信以为真并更新自己的路由“我能通过C到A”，导致B和C之间对去往A的路径成本<mark>不断增加</mark>，直到无穷大。</dd></dl>`},
    {front:"为何需要层次化路由？(AS) 🏢",back:`<dl><dt>问题根源</dt><dd>当网络规模巨大时 (如互联网)，单一的路由算法面临<mark>可扩展性</mark>挑战：路由表过大、路由计算开销过高。</dd><dt>解决方案</dt><dd>将网络划分为多个<mark>自治系统 (Autonomous Systems, AS)</mark>。</dd><dt>两级路由</dt><dd><b>AS内部路由 (Intra-AS):</b> 在AS内部运行，如 <mark>OSPF (LS)</mark> 或 <mark>RIP (DV)</mark>。只关心内部拓扑。<br><b>AS之间路由 (Inter-AS):</b> 在AS之间运行，如 <mark>BGP</mark>。只关心如何到达其他AS，不关心其内部细节。</dd></dl>`},
    {front:"广播、组播与任播的区别 📡",back:`<dl><dt>广播 (Broadcast)</dt><dd><b>目标:</b> 一对<mark>所有</mark>。<br><b>挑战:</b> 避免“广播风暴”。<br><b>智能方案:</b> <mark>反向路径转发 (RPF)</mark>，只接受并转发来自最短路径方向的广播包。</dd><dt>组播 (Multicast)</dt><dd><b>目标:</b> 一对<mark>一组</mark> (特定的组播成员)。<br><b>成员管理:</b> 主机通过 <mark>IGMP</mark> 协议加入或离开组播组。<br><b>应用:</b> 视频会议、在线直播。</dd><dt>任播 (Anycast)</dt><dd><b>目标:</b> 一对<mark>最近的一个</mark> (从一组服务器中选择)。<br><b>原理:</b> 多个服务器共享同一个IP地址，路由系统自动将请求发往“最近”的服务器。<br><b>应用:</b> <mark>DNS根服务器</mark>、<mark>CDN内容分发</mark>、抵御DDoS攻击。</dd></dl>`}
  ]
};